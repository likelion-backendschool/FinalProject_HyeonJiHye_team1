## Title: [3Week]_현지혜

### 이번주 수행사항

---

#### **필수과제**
- 관리자 회원, 관리자페이지, 정산데이터 생성, 건별정산처리, 전체정산처리
#### **추가과제**
- 정산데이터를 배치로 생성
    - 스프링 내장 스케쥴러를 이용해서 배치가 매달 15일 새벽 4시에 실행되도록
    - `@EnableScheduling` 사용
    - Quartz 사용금지, 스프링의 기본적인 스케쥴링 기능을 이용해주세요.
- 출금신청기능(사용자기능)
- 출금처리기능(관리자기능)


### 3주차 미션 개요 - 요구사항 정의

---

#### **정산데이터 생성**

- 결제가 된 주문품목은 정산품목으로 생성될 수 있다.

#### **관리자 페이지**

- 관리자만 관리자 페이지에 접속할 수 있다.
- 개발자가 회원중 임의로 1명을 골라서 관리자로 지정
    - authLevel을 7로 지정

#### **정산**

- 건별정산처리가 가능하다.
- 전체정산처리를 진행한다.
    - 여러개의 건들을 선택하여 한번에 정산처리
- 정산비율은 판매자와 멋북스가 5:5로 나눈다.
- 편의상 PG 수수료는 0원으로 가정하고 진행한다.

#### **출금신청**

- 사용자는 본인이 보유한 예치금에 대해서 출금신청을 할 수 있다.
- 신청시에는 금액과 통장, 계좌번호를 입력한다.

#### **출금신청 처리**

- 관리자만 관리자페이지에서 출금신청목록을 볼 수 있다.
- 해당 내역을 건별로 처리한다.
- 출금 수수료도 없다고 가정한다.


### 3주차 미션 체크리스트

---

#### 필수 과제
- [x] 관리자 회원
- [x] 관리자 페이지
- [x] 정산데이터 생성
- [x] 건별정산처리
- [x] 전체정산처리

#### 추가 과제
- [ ] 정산데이터를 배치로 생성 - 구현 중
- [ ] 출금신청기능(사용자기능)
- [ ] 출금처리기능(관리자기능)


### 3주차 미션 요약

---
#### [접근 방법]
- 2주차 정답코드를 기반으로 미션과제에서 정의한 요구사항 별 우선순위를 두어 개발 진행
- 배치 프로젝트와 음원 프로젝트 강의를 참고하여 구현

#### [개발 과정 요약]
- **관리자 페이지 생성**
  - username이 admin1일 경우 -> 관리자 권한을 부여
  - InitData에 관리자로 지정될 멤버 생성


- **정산 데이터 생성**
  - RebateOrderItem 엔티티 추가 
    - (FK) 구매자 데이터 - buyer 추가
    - (FK) 정산 내역 정보 - rebateCashLog 추가
  - 월별 pay date 처리 (from-to)


- **정산 데이터 리스트**
  - 정산 비율이 판매자:멋북스가 -> 5:5가 되도록 설정
  - PG 수수료는 0원으로


- **정산 시스템 구현**
  - 전체, 건별, 선택 기능 추가
  - 정산 처리 가능 여부 로직 추가


- **정산데이터를 배치로 생성**
  - SpringBatch 설정
  - 주문품목 정산 데이터가 Batch로 생성되도록 주문품목정산 JobConfig 추가


**[특이사항]**
- batch로 정산 데이터 처리 완료하기
- 출금 기능(신청, 처리) 구현 필요
